<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>react Learning!</title>
    <script src="bower_components/react/react.js"></script>
    <script src="bower_components/react/JSXTransformer.js"></script>
</head>
<body>
<div id="app"></div>

<script type="text/jsx">

    var MessageBox = React.createClass({
        getInitialState(){
            return{
                messages : [
                    '消息1',
                    '消息2',
                    '消息3'
                ]
            }
        },
        render:function () {
            return(
                    <div>
                        <h1>{this.props.title}</h1>
                        <SubMessage messages={this.state.messages}/>
                    </div>
            );
        }
    });

    var SubMessage = React.createClass({

        //验证对象messages是否是数组
        propTypes:{
            messages: React.PropTypes.array.isRequired,
        },
        //如果messages对象不存在，将会调用默认的消息
        getDefaultProps:function () {
            return{
                messages: ['默认的消息'],
            }
        },
        render:function () {
            var msgs = [];
            this.props.messages.forEach(function (msg,index) {
                msgs.push(
                        <p>消息列表: {msg}</p>
                )
            });
            return(
                    <h1>{msgs}</h1>
            );
        }
    });

    var title = "顶层props";

    React.render(
            <MessageBox title={title}/>,
            document.getElementById('app')
    );
</script>
</body>
</html>